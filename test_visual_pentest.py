#!/usr/bin/env python3
"""
Test script for visual penetration testing
"""

import asyncio
import sys
from pathlib import Path

# Add project root to path
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

from intelligent_terminal_ai.main import IntelligentTerminalAI

async def test_visual_pentest():
    """Test the visual pentest functionality"""
    
    print("🌐 Testing Visual Penetration Testing...")
    
    async with IntelligentTerminalAI(
        ai_model="gemini-2.0-flash",
        headless_browser=False,  # Make sure browser is visible
        log_level="INFO"
    ) as ai_tool:
        
        target_url = "http://testphp.vulnweb.com/"
        
        print(f"🎯 Target: {target_url}")
        print("📊 Watch the Chrome browser window for real-time testing...")
        
        # Run visual pentest
        result = await ai_tool.autonomous_pentest_visual(target_url, depth=2)
        
        print("\n🎉 Visual pentest completed!")
        print("Results:", result)

if __name__ == "__main__":
    asyncio.run(test_visual_pentest())
